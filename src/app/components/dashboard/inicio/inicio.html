<div class="dashboard-container">
    <!-- Loading State -->
    <div *ngIf="loading" class="loading-container">
        <div class="spinner"></div>
        <p>Cargando datos...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-container">
        <p>{{ error }}</p>
    </div>

    <!-- Dashboard Content -->
    <div *ngIf="!loading && !error" class="dashboard-content">

        <!-- Header -->
        <div class="dashboard-header">
            <h1>Dashboard de Compras</h1>
            <p>Análisis de transacciones y gastos</p>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card stat-blue">
                <div class="stat-content">
                    <div class="stat-info">
                        <p class="stat-label">Total Gastado</p>
                        <p class="stat-value">${{ totalAmount.toFixed(2) }}</p>
                    </div>
                    <div class="stat-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="1" x2="12" y2="23"></line>
                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="stat-card stat-green">
                <div class="stat-content">
                    <div class="stat-info">
                        <p class="stat-label">Transacciones</p>
                        <p class="stat-value">{{ totalTransactions }}</p>
                    </div>
                    <div class="stat-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <div class="stat-card stat-purple">
                <div class="stat-content">
                    <div class="stat-info">
                        <p class="stat-label">Promedio</p>
                        <p class="stat-value">${{ averageAmount.toFixed(2) }}</p>
                    </div>
                    <div class="stat-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Grid -->
        <div class="charts-grid">

            <!-- Bar Chart -->
            <div class="chart-card">
                <h2 class="chart-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="20" x2="12" y2="10"></line>
                        <line x1="18" y1="20" x2="18" y2="4"></line>
                        <line x1="6" y1="20" x2="6" y2="16"></line>
                    </svg>
                    Gastos por Comercio
                </h2>
                <div class="chart-container">
                    <canvas baseChart [type]="barChartType" [data]="barChartData" [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Pie Chart -->
            <div class="chart-card">
                <h2 class="chart-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path>
                        <path d="M22 12A10 10 0 0 0 12 2v10z"></path>
                    </svg>
                    Distribución de Gastos
                </h2>
                <div class="chart-container">
                    <canvas baseChart [type]="pieChartType" [data]="pieChartData" [options]="pieChartOptions">
                    </canvas>
                </div>
            </div>

        </div>

        <!-- Timeline Chart - Full Width -->
        <div class="chart-card chart-full">
            <h2 class="chart-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                Timeline de Compras
            </h2>
            <div class="chart-container-large">
                <canvas baseChart [type]="lineChartType" [data]="lineChartData" [options]="lineChartOptions">
                </canvas>
            </div>
        </div>

    </div>
</div>